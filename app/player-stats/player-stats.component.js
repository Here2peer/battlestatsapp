"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var player_stats_service_1 = require("./player-stats.service");
var player_service_1 = require("../player-services/player.service");
var router_1 = require("@angular/router");
var PlayerStatsComponent = /** @class */ (function () {
    function PlayerStatsComponent(playerStatsService, playerService, route) {
        this.playerStatsService = playerStatsService;
        this.playerService = playerService;
        this.route = route;
        this.unsortedData = new Array;
    }
    PlayerStatsComponent.prototype.ngOnInit = function () {
        this.getPlayerData();
    };
    PlayerStatsComponent.prototype.getPlayerData = function () {
        var _this = this;
        var player_name = 'Joltz';
        this.route.params.subscribe(function (params) {
            console.log(params);
            if (params['id'] === undefined) {
                player_name = 'Joltz';
            }
            else {
                player_name = params['id'];
            }
        });
        this.playerService.getPlayer(player_name, false).subscribe(function (data) {
            _this.playerData = data['data'][0];
            _this.attribute = _this.playerData['attributes'];
            _this.stats = _this.attribute['stats'];
            _this.customstats = _this.attribute['customstats'];
            _this.links = data['links'];
            _this.meta = data['meta'];
            // this.sortedData = this.stats.slice();
            for (var _i = 0, _a = _this.gitMapping; _i < _a.length; _i++) {
                _this.filteredMapping = _a[_i];
                if (_this.filteredMapping.StackableId > 11000 && _this.filteredMapping.StackableId < 12000) {
                    if (_this.filteredMapping.EnglishLocalizedName === undefined) {
                        _this.filteredMapping.EnglishLocalizedName = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 5000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 5000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 6000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 6000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 7000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 7000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 8000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 8000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 9000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 9000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 10000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 10000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 11000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 11000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 12000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 12000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 13000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 13000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 14000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 14000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 15000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 15000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 16000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 16000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 17000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 17000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 1000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 1000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 2000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 2000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId + 29000] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId + 29000] = 0;
                    }
                    if (_this.stats[_this.filteredMapping.StackableId] === undefined) {
                        _this.stats[_this.filteredMapping.StackableId] = 0;
                    }
                    var hours = _this.convertTime(_this.stats[_this.filteredMapping.StackableId + 5000]);
                    _this.unsortedData.push({
                        name: _this.filteredMapping.EnglishLocalizedName,
                        time: hours,
                        rwins2: _this.stats[_this.filteredMapping.StackableId + 6000],
                        rloss2: _this.stats[_this.filteredMapping.StackableId + 7000],
                        rwins3: _this.stats[_this.filteredMapping.StackableId + 8000],
                        rloss3: _this.stats[_this.filteredMapping.StackableId + 9000],
                        uwins2: _this.stats[_this.filteredMapping.StackableId + 10000],
                        uloss2: _this.stats[_this.filteredMapping.StackableId + 11000],
                        uwins3: _this.stats[_this.filteredMapping.StackableId + 12000],
                        uloss3: _this.stats[_this.filteredMapping.StackableId + 13000],
                        bwins: _this.stats[_this.filteredMapping.StackableId + 14000],
                        bloss: _this.stats[_this.filteredMapping.StackableId + 15000],
                        bgwins: _this.stats[_this.filteredMapping.StackableId + 16000],
                        bgloss: _this.stats[_this.filteredMapping.StackableId + 17000],
                        twins: _this.stats[_this.filteredMapping.StackableId + 1000],
                        tloss: _this.stats[_this.filteredMapping.StackableId + 2000],
                        level: _this.stats[_this.filteredMapping.StackableId + 29000],
                        xp: _this.stats[_this.filteredMapping.StackableId],
                        icon: _this.filteredMapping.Icon
                    });
                }
            }
            _this.sortedData = _this.unsortedData.slice();
        });
        this.playerStatsService.getStatsMapping().subscribe(function (data) {
            // console.log(data);
            _this.statsMapping = data;
        });
        this.playerStatsService.getGitMapping().subscribe(function (data) {
            _this.gitMapping = data.Mappings;
        });
    };
    PlayerStatsComponent.prototype.convertTime = function (seconds) {
        console.log(seconds);
        var minutes = seconds / 60;
        console.log(minutes);
        var hours = minutes / 60;
        console.log(hours);
        return Math.ceil(hours);
    };
    PlayerStatsComponent.prototype.sortData = function (sort) {
        var data = this.sortedData.slice();
        if (!sort.active || sort.direction === '') {
            this.sortedData = data;
            return;
        }
        this.sortedData = data.sort(function (a, b) {
            var isAsc = sort.direction === 'asc';
            switch (sort.active) {
                case 'Champion': return compare(a.name, b.name, isAsc);
                case 'Time Played': return compare(a.time, b.time, isAsc);
                case 'Wins': return compare(a.time, b.time, isAsc);
                case 'Losses': return compare(a.time, b.time, isAsc);
                case 'Ranked 2v2 wins': return compare(+a.rwins2, +b.rwins2, isAsc);
                case 'Ranked 2v2 losses': return compare(+a.rloss2, +b.rloss2, isAsc);
                case 'Ranked 3v3 wins': return compare(+a.rwins3, +b.rwins3, isAsc);
                case 'Ranked 3v3 losses': return compare(+a.rloss3, +b.rloss3, isAsc);
                case 'Unranked 2v2 wins': return compare(+a.uwins2, +b.uwins2, isAsc);
                case 'Unranked 2v2 losses': return compare(+a.uloss2, +b.uloss2, isAsc);
                case 'Unranked 3v3 wins': return compare(+a.uwins3, +b.uwins3, isAsc);
                case 'Unranked 3v3 losses': return compare(+a.uloss3, +b.uloss3, isAsc);
                case 'Brawl wins': return compare(+a.bwins, +b.bwins, isAsc);
                case 'Brawl losses': return compare(+a.bloss, +b.bloss, isAsc);
                case 'Battleground wins': return compare(+a.bgwins, +b.bgwins, isAsc);
                case 'Battleground losses': return compare(+a.bgloss, +b.bgloss, isAsc);
                default: return 0;
            }
        });
    };
    PlayerStatsComponent = __decorate([
        core_1.Component({
            selector: 'app-player-stats',
            templateUrl: './player-stats.component.html',
            styleUrls: ['./player-stats.component.css'],
            providers: [player_stats_service_1.PlayerStatsService, player_service_1.PlayerService]
        }),
        __metadata("design:paramtypes", [player_stats_service_1.PlayerStatsService,
            player_service_1.PlayerService,
            router_1.ActivatedRoute])
    ], PlayerStatsComponent);
    return PlayerStatsComponent;
}());
exports.PlayerStatsComponent = PlayerStatsComponent;
function compare(a, b, isAsc) {
    return (a < b ? -1 : 1) * (isAsc ? 1 : -1);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGxheWVyLXN0YXRzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInBsYXllci1zdGF0cy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBK0Q7QUFDL0QsK0RBQTBEO0FBQzFELG9FQUFnRTtBQUNoRSwwQ0FBK0M7QUFVL0M7SUFvQkUsOEJBQW9CLGtCQUFzQyxFQUN0QyxhQUE0QixFQUM1QixLQUFxQjtRQUZyQix1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW9CO1FBQ3RDLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQzVCLFVBQUssR0FBTCxLQUFLLENBQWdCO1FBWnpDLGlCQUFZLEdBQUcsSUFBSSxLQUFLLENBQUM7SUFhVCxDQUFDO0lBRWpCLHVDQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQztJQUVELDRDQUFhLEdBQWI7UUFBQSxpQkFvSUM7UUFuSUMsSUFBSSxXQUFXLEdBQUcsT0FBTyxDQUFDO1FBQzFCLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUFBLE1BQU07WUFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNwQixFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDL0IsV0FBVyxHQUFHLE9BQU8sQ0FBQztZQUN4QixDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ04sV0FBVyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM3QixDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQUMsSUFBUztZQUNqRSxLQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxLQUFJLENBQUMsU0FBUyxHQUFHLEtBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDL0MsS0FBSSxDQUFDLEtBQUssR0FBRyxLQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3JDLEtBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUNqRCxLQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMzQixLQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN6Qix3Q0FBd0M7WUFDeEMsR0FBRyxDQUFDLENBQXlCLFVBQWUsRUFBZixLQUFBLEtBQUksQ0FBQyxVQUFVLEVBQWYsY0FBZSxFQUFmLElBQWU7Z0JBQXZDLEtBQUksQ0FBQyxlQUFlLFNBQUE7Z0JBQ3ZCLEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLEtBQUssSUFBSSxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO29CQUN6RixFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLG9CQUFvQixLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7d0JBQzVELEtBQUksQ0FBQyxlQUFlLENBQUMsb0JBQW9CLEdBQUcsQ0FBQyxDQUFDO29CQUNoRCxDQUFDO29CQUVELEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQzt3QkFDdEUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzFELENBQUM7b0JBRUQsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUN0RSxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDMUQsQ0FBQztvQkFFRCxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7d0JBQ3RFLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUMxRCxDQUFDO29CQUVELEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQzt3QkFDdEUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzFELENBQUM7b0JBRUQsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUN0RSxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDMUQsQ0FBQztvQkFFRCxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7d0JBQ3ZFLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUMzRCxDQUFDO29CQUVELEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQzt3QkFDdkUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzNELENBQUM7b0JBRUQsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUN2RSxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDM0QsQ0FBQztvQkFFRCxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7d0JBQ3ZFLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUMzRCxDQUFDO29CQUVELEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQzt3QkFDdkUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzNELENBQUM7b0JBRUQsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUN2RSxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDM0QsQ0FBQztvQkFFRCxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7d0JBQ3ZFLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUMzRCxDQUFDO29CQUVELEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQzt3QkFDdkUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzNELENBQUM7b0JBRUQsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUN0RSxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDMUQsQ0FBQztvQkFFRCxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7d0JBQ3RFLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUMxRCxDQUFDO29CQUVELEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQzt3QkFDdkUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzNELENBQUM7b0JBRUQsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7d0JBQy9ELEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ25ELENBQUM7b0JBRUQsSUFBTSxLQUFLLEdBQUcsS0FBSSxDQUFDLFdBQVcsQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7b0JBQ3BGLEtBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUNwQjt3QkFDRSxJQUFJLEVBQUUsS0FBSSxDQUFDLGVBQWUsQ0FBQyxvQkFBb0I7d0JBQy9DLElBQUksRUFBRSxLQUFLO3dCQUNYLE1BQU0sRUFBRSxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQzt3QkFDM0QsTUFBTSxFQUFFLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO3dCQUMzRCxNQUFNLEVBQUUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7d0JBQzNELE1BQU0sRUFBRSxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQzt3QkFDM0QsTUFBTSxFQUFFLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO3dCQUM1RCxNQUFNLEVBQUUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7d0JBQzVELE1BQU0sRUFBRSxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQzt3QkFDNUQsTUFBTSxFQUFFLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO3dCQUM1RCxLQUFLLEVBQUUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7d0JBQzNELEtBQUssRUFBRSxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQzt3QkFDM0QsTUFBTSxFQUFFLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO3dCQUM1RCxNQUFNLEVBQUUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7d0JBQzVELEtBQUssRUFBRSxLQUFJLENBQUMsS0FBSyxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQzt3QkFDMUQsS0FBSyxFQUFFLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO3dCQUMxRCxLQUFLLEVBQUUsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsR0FBRyxLQUFL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QU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUN0RSxLQUFLLHFCQUFxQixFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztnQkFDeEUsU0FBUyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUF6TVUsb0JBQW9CO1FBUGhDLGdCQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsa0JBQWtCO1lBQzVCLFdBQVcsRUFBRSwrQkFBK0I7WUFDNUMsU0FBUyxFQUFFLENBQUMsOEJBQThCLENBQUM7WUFDM0MsU0FBUyxFQUFFLENBQUMseUNBQWtCLEVBQUUsOEJBQWEsQ0FBQztTQUMvQyxDQUFDO3lDQXNCd0MseUNBQWtCO1lBQ3ZCLDhCQUFhO1lBQ3JCLHVCQUFjO09BdEI5QixvQkFBb0IsQ0EwTWhDO0lBQUQsMkJBQUM7Q0FBQSxBQTFNRCxJQTBNQztBQTFNWSxvREFBb0I7QUE0TWpDLGlCQUFpQixDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUs7SUFDMUIsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QWZ0ZXJWaWV3SW5pdCwgQ29tcG9uZW50LCBPbkluaXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1BsYXllclN0YXRzU2VydmljZX0gZnJvbSAnLi9wbGF5ZXItc3RhdHMuc2VydmljZSc7XHJcbmltcG9ydCB7UGxheWVyU2VydmljZX0gZnJvbSAnLi4vcGxheWVyLXNlcnZpY2VzL3BsYXllci5zZXJ2aWNlJztcclxuaW1wb3J0IHtBY3RpdmF0ZWRSb3V0ZX0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcclxuaW1wb3J0IHtTb3J0fSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1wbGF5ZXItc3RhdHMnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9wbGF5ZXItc3RhdHMuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3BsYXllci1zdGF0cy5jb21wb25lbnQuY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbUGxheWVyU3RhdHNTZXJ2aWNlLCBQbGF5ZXJTZXJ2aWNlXVxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXllclN0YXRzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICBwbGF5ZXJEYXRhOiBhbnk7XHJcbiAgYXR0cmlidXRlOiBhbnk7XHJcbiAgc3RhdHM6IGFueTtcclxuICBjdXN0b21zdGF0czogYW55O1xyXG4gIGxpbmtzOiBhbnk7XHJcbiAgbWV0YTogYW55O1xyXG4gIHN0YXRzTWFwcGluZzogYW55O1xyXG4gIGdpdE1hcHBpbmc6IGFueTtcclxuICBzb3J0ZWREYXRhO1xyXG4gIHVuc29ydGVkRGF0YSA9IG5ldyBBcnJheTtcclxuICBmaWx0ZXJlZE1hcHBpbmc7XHJcbiAgc2VhcmNoZWQ6IGFueTtcclxuXHJcblxyXG4gIGNoYW1waW9uSWRzOiB7MSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNSwgMTYsIDE3LCAxOCwgMTksXHJcbiAgICAyMCwgMjEsIDIyICwgMjMsIDI1LCAyNiwgMjcsIDI4LCAyOSwgMzAsIDMxLCAzOCwgNDAsIDQxfTtcclxuICBjYXRlZ29yaWVzOiB7MTEwMDAsIDEyMDAwLCAxMzAwMCwgMTQwMDAsIDE1MDAwLCAxNjAwMCwgMTcwMDAsIDE4MDAwLCAxOTAwMCwgMjAwMDAsXHJcbiAgICAyMTAwMCwgMjIwMDAsIDIzMDAwLCAyNDAwMCwgMjUwMDAsIDI2MDAwLCAyNzAwMCwgMjgwMDAsIDQwMDAwfTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBwbGF5ZXJTdGF0c1NlcnZpY2U6IFBsYXllclN0YXRzU2VydmljZSxcclxuICAgICAgICAgICAgICBwcml2YXRlIHBsYXllclNlcnZpY2U6IFBsYXllclNlcnZpY2UsXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSByb3V0ZTogQWN0aXZhdGVkUm91dGUsXHJcbiAgICAgICAgICAgICAgKSB7IH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmdldFBsYXllckRhdGEoKTtcclxuICB9XHJcblxyXG4gIGdldFBsYXllckRhdGEoKSB7XHJcbiAgICBsZXQgcGxheWVyX25hbWUgPSAnSm9sdHonO1xyXG4gICAgdGhpcy5yb3V0ZS5wYXJhbXMuc3Vic2NyaWJlKHBhcmFtcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHBhcmFtcyk7XHJcbiAgICAgIGlmIChwYXJhbXNbJ2lkJ10gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHBsYXllcl9uYW1lID0gJ0pvbHR6JztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwbGF5ZXJfbmFtZSA9IHBhcmFtc1snaWQnXTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnBsYXllclNlcnZpY2UuZ2V0UGxheWVyKHBsYXllcl9uYW1lLCBmYWxzZSkuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICB0aGlzLnBsYXllckRhdGEgPSBkYXRhWydkYXRhJ11bMF07XHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGUgPSB0aGlzLnBsYXllckRhdGFbJ2F0dHJpYnV0ZXMnXTtcclxuICAgICAgICB0aGlzLnN0YXRzID0gdGhpcy5hdHRyaWJ1dGVbJ3N0YXRzJ107XHJcbiAgICAgICAgdGhpcy5jdXN0b21zdGF0cyA9IHRoaXMuYXR0cmlidXRlWydjdXN0b21zdGF0cyddO1xyXG4gICAgICAgIHRoaXMubGlua3MgPSBkYXRhWydsaW5rcyddO1xyXG4gICAgICAgIHRoaXMubWV0YSA9IGRhdGFbJ21ldGEnXTtcclxuICAgICAgICAvLyB0aGlzLnNvcnRlZERhdGEgPSB0aGlzLnN0YXRzLnNsaWNlKCk7XHJcbiAgICAgICAgZm9yICh0aGlzLmZpbHRlcmVkTWFwcGluZyBvZiB0aGlzLmdpdE1hcHBpbmcpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCA+IDExMDAwICYmIHRoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkIDwgMTIwMDApIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyZWRNYXBwaW5nLkVuZ2xpc2hMb2NhbGl6ZWROYW1lID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICB0aGlzLmZpbHRlcmVkTWFwcGluZy5FbmdsaXNoTG9jYWxpemVkTmFtZSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgNTAwMF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyA1MDAwXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgNjAwMF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyA2MDAwXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgNzAwMF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyA3MDAwXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgODAwMF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyA4MDAwXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgOTAwMF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyA5MDAwXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMTAwMDBdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMTAwMDBdID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxMTAwMF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxMTAwMF0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDEyMDAwXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDEyMDAwXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMTMwMDBdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMTMwMDBdID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxNDAwMF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxNDAwMF0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDE1MDAwXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDE1MDAwXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMTYwMDBdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMTYwMDBdID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxNzAwMF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxNzAwMF0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDEwMDBdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMTAwMF0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDIwMDBdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMjAwMF0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDI5MDAwXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDI5MDAwXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZF0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBob3VycyA9IHRoaXMuY29udmVydFRpbWUodGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDUwMDBdKTtcclxuICAgICAgICAgICAgdGhpcy51bnNvcnRlZERhdGEucHVzaChcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmZpbHRlcmVkTWFwcGluZy5FbmdsaXNoTG9jYWxpemVkTmFtZSxcclxuICAgICAgICAgICAgICAgIHRpbWU6IGhvdXJzLFxyXG4gICAgICAgICAgICAgICAgcndpbnMyOiB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgNjAwMF0sXHJcbiAgICAgICAgICAgICAgICBybG9zczI6IHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyA3MDAwXSxcclxuICAgICAgICAgICAgICAgIHJ3aW5zMzogdGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDgwMDBdLFxyXG4gICAgICAgICAgICAgICAgcmxvc3MzOiB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgOTAwMF0sXHJcbiAgICAgICAgICAgICAgICB1d2luczI6IHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxMDAwMF0sXHJcbiAgICAgICAgICAgICAgICB1bG9zczI6IHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxMTAwMF0sXHJcbiAgICAgICAgICAgICAgICB1d2luczM6IHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxMjAwMF0sXHJcbiAgICAgICAgICAgICAgICB1bG9zczM6IHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxMzAwMF0sXHJcbiAgICAgICAgICAgICAgICBid2luczogdGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDE0MDAwXSxcclxuICAgICAgICAgICAgICAgIGJsb3NzOiB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMTUwMDBdLFxyXG4gICAgICAgICAgICAgICAgYmd3aW5zOiB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMTYwMDBdLFxyXG4gICAgICAgICAgICAgICAgYmdsb3NzOiB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMTcwMDBdLFxyXG4gICAgICAgICAgICAgICAgdHdpbnM6IHRoaXMuc3RhdHNbdGhpcy5maWx0ZXJlZE1hcHBpbmcuU3RhY2thYmxlSWQgKyAxMDAwXSxcclxuICAgICAgICAgICAgICAgIHRsb3NzOiB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkICsgMjAwMF0sXHJcbiAgICAgICAgICAgICAgICBsZXZlbDogdGhpcy5zdGF0c1t0aGlzLmZpbHRlcmVkTWFwcGluZy5TdGFja2FibGVJZCArIDI5MDAwXSxcclxuICAgICAgICAgICAgICAgIHhwOiB0aGlzLnN0YXRzW3RoaXMuZmlsdGVyZWRNYXBwaW5nLlN0YWNrYWJsZUlkXSxcclxuICAgICAgICAgICAgICAgIGljb246IHRoaXMuZmlsdGVyZWRNYXBwaW5nLkljb25cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc29ydGVkRGF0YSA9IHRoaXMudW5zb3J0ZWREYXRhLnNsaWNlKCk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5wbGF5ZXJTdGF0c1NlcnZpY2UuZ2V0U3RhdHNNYXBwaW5nKCkuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICB0aGlzLnN0YXRzTWFwcGluZyA9IGRhdGE7XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5wbGF5ZXJTdGF0c1NlcnZpY2UuZ2V0R2l0TWFwcGluZygpLnN1YnNjcmliZSgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgdGhpcy5naXRNYXBwaW5nID0gZGF0YS5NYXBwaW5ncztcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNvbnZlcnRUaW1lKHNlY29uZHMpIHtcclxuICAgIGNvbnNvbGUubG9nKHNlY29uZHMpXHJcbiAgICBjb25zdCBtaW51dGVzID0gc2Vjb25kcyAvIDYwO1xyXG4gICAgY29uc29sZS5sb2cobWludXRlcyk7XHJcbiAgICBjb25zdCBob3VycyA9IG1pbnV0ZXMgLyA2MDtcclxuICAgIGNvbnNvbGUubG9nKGhvdXJzKTtcclxuICAgIHJldHVybiBNYXRoLmNlaWwoaG91cnMpO1xyXG4gIH1cclxuXHJcbiAgc29ydERhdGEoc29ydDogU29ydCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuc29ydGVkRGF0YS5zbGljZSgpO1xyXG4gICAgaWYgKCFzb3J0LmFjdGl2ZSB8fCBzb3J0LmRpcmVjdGlvbiA9PT0gJycpIHtcclxuICAgICAgdGhpcy5zb3J0ZWREYXRhID0gZGF0YTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc29ydGVkRGF0YSA9IGRhdGEuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICBjb25zdCBpc0FzYyA9IHNvcnQuZGlyZWN0aW9uID09PSAnYXNjJztcclxuICAgICAgc3dpdGNoIChzb3J0LmFjdGl2ZSkge1xyXG4gICAgICAgIGNhc2UgJ0NoYW1waW9uJzogcmV0dXJuIGNvbXBhcmUoYS5uYW1lLCBiLm5hbWUsIGlzQXNjKTtcclxuICAgICAgICBjYXNlICdUaW1lIFBsYXllZCc6IHJldHVybiBjb21wYXJlKGEudGltZSwgYi50aW1lLCBpc0FzYyk7XHJcbiAgICAgICAgY2FzZSAnV2lucyc6IHJldHVybiBjb21wYXJlKGEudGltZSwgYi50aW1lLCBpc0FzYyk7XHJcbiAgICAgICAgY2FzZSAnTG9zc2VzJzogcmV0dXJuIGNvbXBhcmUoYS50aW1lLCBiLnRpbWUsIGlzQXNjKTtcclxuICAgICAgICBjYXNlICdSYW5rZWQgMnYyIHdpbnMnOiByZXR1cm4gY29tcGFyZSgrYS5yd2luczIsICtiLnJ3aW5zMiwgaXNBc2MpO1xyXG4gICAgICAgIGNhc2UgJ1JhbmtlZCAydjIgbG9zc2VzJzogcmV0dXJuIGNvbXBhcmUoK2Eucmxvc3MyLCArYi5ybG9zczIsIGlzQXNjKTtcclxuICAgICAgICBjYXNlICdSYW5rZWQgM3YzIHdpbnMnOiByZXR1cm4gY29tcGFyZSgrYS5yd2luczMsICtiLnJ3aW5zMywgaXNBc2MpO1xyXG4gICAgICAgIGNhc2UgJ1JhbmtlZCAzdjMgbG9zc2VzJzogcmV0dXJuIGNvbXBhcmUoK2Eucmxvc3MzLCArYi5ybG9zczMsIGlzQXNjKTtcclxuICAgICAgICBjYXNlICdVbnJhbmtlZCAydjIgd2lucyc6IHJldHVybiBjb21wYXJlKCthLnV3aW5zMiwgK2IudXdpbnMyLCBpc0FzYyk7XHJcbiAgICAgICAgY2FzZSAnVW5yYW5rZWQgMnYyIGxvc3Nlcyc6IHJldHVybiBjb21wYXJlKCthLnVsb3NzMiwgK2IudWxvc3MyLCBpc0FzYyk7XHJcbiAgICAgICAgY2FzZSAnVW5yYW5rZWQgM3YzIHdpbnMnOiByZXR1cm4gY29tcGFyZSgrYS51d2luczMsICtiLnV3aW5zMywgaXNBc2MpO1xyXG4gICAgICAgIGNhc2UgJ1VucmFua2VkIDN2MyBsb3NzZXMnOiByZXR1cm4gY29tcGFyZSgrYS51bG9zczMsICtiLnVsb3NzMywgaXNBc2MpO1xyXG4gICAgICAgIGNhc2UgJ0JyYXdsIHdpbnMnOiByZXR1cm4gY29tcGFyZSgrYS5id2lucywgK2IuYndpbnMsIGlzQXNjKTtcclxuICAgICAgICBjYXNlICdCcmF3bCBsb3NzZXMnOiByZXR1cm4gY29tcGFyZSgrYS5ibG9zcywgK2IuYmxvc3MsIGlzQXNjKTtcclxuICAgICAgICBjYXNlICdCYXR0bGVncm91bmQgd2lucyc6IHJldHVybiBjb21wYXJlKCthLmJnd2lucywgK2IuYmd3aW5zLCBpc0FzYyk7XHJcbiAgICAgICAgY2FzZSAnQmF0dGxlZ3JvdW5kIGxvc3Nlcyc6IHJldHVybiBjb21wYXJlKCthLmJnbG9zcywgK2IuYmdsb3NzLCBpc0FzYyk7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIDA7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY29tcGFyZShhLCBiLCBpc0FzYykge1xyXG4gIHJldHVybiAoYSA8IGIgPyAtMSA6IDEpICogKGlzQXNjID8gMSA6IC0xKTtcclxufVxyXG5cclxuXHJcbiJdfQ==